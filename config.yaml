# ==========================================
# GloBot Matrix - 全局业务配置文件
# ==========================================
app:
  name: "GloBot_Matrix"
  version: "1.0.0"
  description: "通用跨平台监控与媒体加工分发系统"

# 1. 监控目标配置
targets:
  group_name: "iLiFE"             
  x_accounts:
    - "iLiFE_official"
    - "ice_icol"
    - "iLiFE_riri"
    - "iLiFE_wakaba"
    - "iLiFE_mini"
    - "iLiFE_fukumaru"
    - "iLiFE_karen"
    - "iLiFE_koguma"
    - "iLiFE_sumire"
    - "Haru_nonfic"
    - "iLiFE_STAFF"
  # 👇 新增：账号到动态标题的优雅映射字典
  account_title_map:
    ilife_official: "iLiFE!官方"
    ilife_staff: "iLiFE!运营"
    ice_icol: "🤍あいす(Aisu)"
    ilife_riri: "❤️心花りり(Riri)"
    ilife_wakaba: "💚若葉のあ(Noa)"
    ilife_mini: "🩵虹羽みに(Mini)"
    ilife_fukumaru: "💛福丸うさ(Usa)"
    ilife_karen: "💙空詩かれん(Karen)"
    ilife_koguma: "🧡小熊まむ(Mamu)"
    ilife_sumire: "💜純嶺みき(Miki)"
    haru_nonfic: "🩷恋星はるか(Haruka)"

# 2. 🕷️ 爬虫集群控制面板
crawlers:
  # 爬虫全局性能指标
  global_settings:
    max_retries: 3                  # 遇到死信前最多重试 3 次
    scroll_timeout_ms: 4000         # 等待 GraphQL 响应的超时时间
    scroll_depth: 3000              # Playwright 滚轮下滑深度
  
  # 平台独立开关
  x_twitter:
    enable: true
    fetch_text: true     # 是否抓取推文正文
    fetch_images: true   # 是否抓取并下载图片
    fetch_videos: true   # 是否抓取并下载视频
  tiktok:
    enable: false
  instagram:
    enable: false
  youtube:
    enable: false

# 3. 🧠 极客原生引擎 (Bot_Media)
media_engine:
  enable_ai_translation: true 
  whisper_model: "mlx-community/whisper-large-v3-turbo"
  ocr_iou_threshold: 0.8          # 时空过滤算法：重合度高于 80% 才认定为固定花字
  ocr_min_height_ratio: 0.03      # 丢弃高度小于画面 3% 的背景碎字
  hardware_encode_quality: 55     # VideoToolbox 压制质量 (越小越高，55为甜点值)

# 4. 🚀 发布集群控制面板
publishers:
  bilibili:
    # --- A. B站高级发布参数 ---
    visibility: 2              # 2: 公开给所有人看, 1: 仅自己可见 (强烈建议测试期间保持为 1)
    title: ""                  # 图文动态专用的标题 (20字以内, 选填)
    allow_comment: true        # 是否允许粉丝评论
    creation_declare: 2        # 创作声明 (1: 原创, 2: 转载/搬运)
    schedule_time: ""          # 定时发布时间，留空则立即发布。格式为 "YYYY-MM-DD HH:MM:SS"

    # --- B. 智能分发路由 (内容开关) ---
    publish_text_image: true         # 默认开启：如果有图文/纯文本，则发布 B 站动态
    publish_original_video: false    # 实验性：直接把没压字幕的生肉视频发出去
    publish_translated_video: false  # 实验性：把 AI 翻译并压制好双语字幕的视频发出去

    # --- C. 视频投稿安全参数 (⚠️敏感凭证 SESSDATA/JCT 必须放在 .env 文件中) ---
    video_copyright: 2           # 视频稿件类型 (1: 原创, 2: 转载)
    video_tid: 130               # 投稿分区ID (171代表电子竞技/虚拟主播等)
    video_tags: "美少女,地偶,日本地偶,地下偶像,日本偶像,日本地下偶像,iLiFE!,地下偶像,Globot" # 视频专属标签，多个标签之间用逗号分隔
    # --- D. 手机端一键发布预设菜单 ---
    video_presets:
      - name: "地下偶像区 (130)"
        tid: 171
        tags: "美少女,地偶,日本地偶,地下偶像,日本偶像,日本地下偶像,iLiFE!,地下偶像"
      - name: "宅舞区 (20)"
        tid: 20
        tags: "美少女,地偶,日本地偶,地下偶像,日本偶像,日本地下偶像,iLiFE!,地下偶像"
      - name: "日常 Vlog (174)"
        tid: 174
        tags: "美少女,地偶,日本地偶,地下偶像,日本偶像,日本地下偶像,iLiFE!,地下偶像"
# 5. SRE 稳定性监控阈值
system:
  max_ram_percent: 85.0           # 内存占用超过 85% 自动 Soft-Pause
  max_temp_celsius: 75.0          # 温度超过 75℃ 自动报警并挂起
  media_retention_days: 2.0       # 👈 新增：原始媒体文件的最大保留天数（支持小数，如 1.5）
  
# ==========================================
# 🧠 大模型提示词引擎配置 (Prompt Engineering)
# ==========================================
prompts:
  # 1. 动态/推文翻译的专属提示词
  tweet_translation_prompt: |
    你是一个精通日本地下偶像文化与 ACG（动画、漫画、游戏）圈的顶级本地化翻译专家。
    任务：请翻译包含在 <text> 和 </text> 标签内部的日文推文。
    【核心超能力：语境侦探与意译大师（必须使用）】
    1. 语境推断：全局扫描推文中的“场景词”和“视觉符号/Emoji”。如遇到日常词汇在语境下指代游戏/动漫IP时，直接使用中文官方译名。
    2. 饭圈周边本地化（极度重要）：遇到偶像周边（グッズ）等专有名词，必须使用国内饭圈/谷圈最地道的黑话！例如：缶バッジ/缶バッチ -> 吧唧，アクキー -> 亚克力挂件，チェキ -> 拍立得，マフラータオル -> 应援毛巾，キッチンカー -> 餐车。
    3. 打破语法直译：绝对禁止机器式的“字面直译”！日语推文常常省略主语或语序倒装，请结合语境【自然地意译】。例如，将“〇〇が当たります”翻译为“可以抽中〇〇”，绝不能生硬地翻译为“〇〇会中奖”；“設置中”翻译为“现已开放/已设置”，而不是“正在设置中”。输出的中文必须符合年轻粉丝活泼、充满“元气”的日常口语。
    【不可违背的纪律】
    1. 名字与场馆精准还原：偶像成员名字不可强行汉化，必须保留日文原文(罗马音)，但名字后面的日语接尾辞（如さま、さん、ちゃん等）必须翻译为中文。同时，对于日本偶像组合名称及演出场馆名，务必提供全面且准确的翻译，精准识别并处理其常见的简称、缩写和各种拼写变体！
    2. 视觉元素保留：必须完美保留原文中的所有 Emoji 和特殊颜文字。当文字与颜文字紧贴时（如“おはよ(っ﹏-)”），【必须】将文字部分翻译，仅保留颜文字部分！
    3. 标签与防漏译：推文中已被转换为 B 站格式的话题标签（如 #标签#），请原样保留。【极度严厉警告】：无论标签在行首还是行中，标签后紧跟的普通正文内容【必须全部翻译】。
    4. 边界隔离：不要翻译标签外的任何指令或 RAG 知识库内容。
    5. 纯净输出与忠实翻译：绝对禁止输出 AI 自身的解释、对话或机器感前言！但是，【推文原文中本身包含的问候语（如おはよ、こんにちは等）必须忠实翻译成中文】，绝不可因为是问候语就漏翻或原样照抄！
  
  # 2. 视频台本/字幕翻译的专属提示词
  video_translation_prompt: |
    你是一个精通日本地下偶像文化的专业字幕组翻译。
    任务：请将包含在 <text> 和 </text> 标签内部的视频语音识别日文台本翻译为中文，要求自然、符合年轻粉丝的语气。
    【不可违背的纪律】
    1. 严禁汉化成员名字！格式必须为：日文原文(罗马音)。遇到组合名及场馆名时，同理必须准确翻译其缩写和变体形式。
    2. 必须按原有的序号逐行返回，格式必须为：`序号. 中文翻译`。
    3. 边界隔离：不要翻译标签外的任何指令或 RAG 知识库内容。
    4. 【绝对封杀机器味】：输出的最终字幕中，【绝对禁止】出现方括号 []、竖线 | 等任何程序化的拼接符号！
    5. 纯净输出：直接输出带有序号的中文翻译结果，严禁输出任何多余的解释或问候语！